# UNIX 环境高级编程

## UNIX 基础知识

* 操作系统是一种控制计算机硬件资源，提供程序运行环境。通常叫做内核(kernel)。内核的接口称为系统调用(system call)。公共库函数构建在系统调用接口上，应用程序既可使用公用程序库，也可使用系统调用。shell 是一个特殊的应用程序，为运行其他应用程序提供了一个接口。

* 用户在登录UNIX系统时，先输入用户名，然后输入口令。系统在其口令文件(/etc/passwd)中查看登录名。口令文件上的登录项由7个以冒号分隔的字段组，依次是：登录名、加密口令、数字用户ID、数据组ID、注释字段、起始目录、以及shell程序:

```bash
sar:x:205:105:Stephen Rago:/home/sar:/bin/ksh
```

* 用户登录后，系统通常显示一些系统信息，然后用户可以向shell输入命令。shell是一个命令行解释器，它读取用户输入，然后执行命令。shell的用户输入通常来自终端(交互式shell),有时来自于文件(shell脚本).系统中存在多个shell。

* UNIX文件系统是目录和文件的一种层次结构，所有东西的起点是称为根(root)的目录，这个目录的名称是一个字符“/”。

* 目录(directory)是一个包含目录项的文件。逻辑上，可以认为每个目录都包含一个文件名，同时还包含说明该文件属性的信息。文件属性是指文件类型、文件大小、文件所有者、文件权限以及文件最后的修改时间等。

* 目录中的各个名字称为文件名。只有斜线(/)和空字符这两个字符不能出现在文件名中。斜线用来分隔构成路径的各文件名，空字符则用来终止一个路径名。

* 创建新目录时会自动创建两个文件名:.(点)和..(点点)。点指向当前目录，点点指向父目录。最高层次时点与点点相同。

* 路径名，由斜线分隔的一个或多个文件名组成的序列构成，以斜线开头的路径名称为绝对路径，否则为相对路径名。

* 每个里程都有一个工作目录(working directory)，有时称其为当前工作目录(current working directory)。所有相对路径名都从工作目录开始解释.进程可以用 chdir 函数更改其工作目录.

* 登录时，工作目录设置为起始目录(home directory)。

* 文件描述符(file descriptor) 通常是一个小的非负整数，内核用以标识一个特定进程正在访问的文件。当内核打开一个现有谁的或创建一个新文件时，它都返回一个文件描述符。在读、写文件时，可以使用这个文件描述符。

* 标准输入、标准输出和标准错误。按惯例，每当运行一个新程序时，所有 shell 都为为其打开 3 个文件描述符，即标准输入（standard input）、标准输出（standard output）以及标准错误（standard error）。如果不做特殊处理，这 3 个描述符都链接向终端。
* 函数 open、read、write、lsekk以及close提供了不带缓冲的I/O。这些函数都使用文件描述符。
* 标准I/O。为那些不带缓冲的I/O函数提供一个缓冲的接口。
* 程序是一个存储在磁盘上某个目录中的可执行文件。内核使用exec函数（7个exec函数之一），将程序读入内存并执行程序。
* 进程和进程ID。敋以的执行实例称为进程（process）。UNIX系统确保每一个进程都有一个唯一的数字标识符，称为进程ID（process ID）。进程ID总是一个非负整数。
* 进程控制，有三个用于进程控制的主要函数：fork、exec和waitpid（exec函数有7种变体）。
* 线程和线程ID。通常一个进程只有一个控制线程（thread）-某一时刻执行的一组机器指令。一个进程内的所有线程共享同一地址空间、文件描述符、栈以及与进程相关的属性。因为它们能访问同一存储区，所以各线程在访问共享数据时需要采取同步措施以避免一不致性。线程也用ID标识。但是线程ID只在它所属的进程内起作用。一个进程中的线程ID在另一个进程中没有意义。当在一进程中对某个特定线程进行处理时，我们可以使用线程的ID引用它。控制线程和函数和控制进程的函数类似，但另有一套。
* 当UNIX系统函数出错时，通常会返回一个负值，而且整形变量errno通常被设置为具有特定信息的值。
* 出错可分为两类：致命性的和非致命性的。 对于致命性的错误，无法执行恢复动作。

## UNIX 标准及实现

## 文件I/O

## 文件和目录

## 标准I/O库

## 系统数据文件和信息

## 进程环境

## 进程控制

## 进程关系

## 信号

## 线程

## 线程控制

## 守护进程

## 高级I/O

## 进程间通信

## 网络IPC: 套接字

## 高级进程间通信

## 终端I/O

## 伪终端

## 数据库函数库

## 与网络打印机通信